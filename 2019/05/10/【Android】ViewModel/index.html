<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>【Android】ViewModel | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="官方地址https://developer.android.google.cn/topic/libraries/architecture/viewmodel 简介The ViewModel class is designed to store and manage UI-related data in a lifecycle conscious way.（ViewModel用来存储和处理UI有关的">
<meta property="og:type" content="article">
<meta property="og:title" content="【Android】ViewModel">
<meta property="og:url" content="http://yoursite.com/2019/05/10/【Android】ViewModel/index.html">
<meta property="og:site_name">
<meta property="og:description" content="官方地址https://developer.android.google.cn/topic/libraries/architecture/viewmodel 简介The ViewModel class is designed to store and manage UI-related data in a lifecycle conscious way.（ViewModel用来存储和处理UI有关的">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-05-10T08:55:03.639Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【Android】ViewModel">
<meta name="twitter:description" content="官方地址https://developer.android.google.cn/topic/libraries/architecture/viewmodel 简介The ViewModel class is designed to store and manage UI-related data in a lifecycle conscious way.（ViewModel用来存储和处理UI有关的">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <!-- <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav> -->
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-【Android】ViewModel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/10/【Android】ViewModel/" class="article-date">
  <time datetime="2019-05-10T07:29:38.000Z" itemprop="datePublished">2019-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      【Android】ViewModel
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="官方地址"><a href="#官方地址" class="headerlink" title="官方地址"></a>官方地址</h4><p><a href="https://developer.android.google.cn/topic/libraries/architecture/viewmodel" target="_blank" rel="noopener">https://developer.android.google.cn/topic/libraries/architecture/viewmodel</a></p>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><pre><code>The ViewModel class is designed to store and manage UI-related data in a lifecycle conscious way.（ViewModel用来存储和处理UI有关的数据）

If the system destroys or re-creates a UI controller, any transient UI-related data you store in them is lost. （问题：如果系统异常，那么UI里面的数据就丢失了。）

Another problem is that UI controllers frequently need to make asynchronous calls that may take some time to return. The UI controller needs to manage these calls and ensure the system cleans them up after it&#39;s destroyed to avoid potential memory leaks. （问题：UI控制器要频繁地做异步请求）

UI controllers such as activities and fragments are primarily intended to display UI data, react to user actions, or handle operating system communication, such as permission requests. （UI控制器要做的事情太多了）
</code></pre><h4 id="实现一个ViewModel"><a href="#实现一个ViewModel" class="headerlink" title="实现一个ViewModel"></a>实现一个ViewModel</h4><pre><code>If the activity is re-created, it receives the same MyViewModel instance that was created by the first activity. 
</code></pre><h4 id="ViewModel的生命周期"><a href="#ViewModel的生命周期" class="headerlink" title="ViewModel的生命周期"></a>ViewModel的生命周期</h4><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p><a href="https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e" target="_blank" rel="noopener">https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/10/【Android】ViewModel/" data-id="cjwi0u3ky000ssz9p3b50733z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/05/10/【Android】Custom-View-Components/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          【Android】Custom View Components
        
      </div>
    </a>
  
  
    <a href="/2019/05/10/【Android】LiveData/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">【Android】LiveData</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/04/【Flutter】Target-of-URI-doesn-t-exist/">【Flutter】Target of URI doesn&#39;t exist</a>
          </li>
        
          <li>
            <a href="/2019/06/02/【Flutter】插件/">【Flutter】插件</a>
          </li>
        
          <li>
            <a href="/2019/06/01/【Flutter】widget/">【Flutter】widget</a>
          </li>
        
          <li>
            <a href="/2019/06/01/【Flutter】布局/">【Flutter】布局</a>
          </li>
        
          <li>
            <a href="/2019/06/01/【Android】Gradle管理/">【Android】Gradle管理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 刘兴良<br>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>